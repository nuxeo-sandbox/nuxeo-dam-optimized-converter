<component name="org.nuxeo.labs.dam.converters.commandline">

    <require>org.nuxeo.ecm.platform.commandline.executor.service.defaultContrib</require>

    <extension point="command" target="org.nuxeo.ecm.platform.commandline.executor.service.CommandLineExecutorComponent">
        <command enabled="true" name="MultiOutputPictureResize">
            <commandLine>convert</commandLine>
            <parameterString>-define registry:temporary-path=#{nuxeo.tmp.dir} -quiet -background white -flatten #{inputFilePath}[0] -resize "1920x>" -write #{FullHDOutputFilePath}.jpeg -resize "1280x>" -write #{MediumOutputFilePath}.jpeg -resize "640x>" -write #{SmallOutputFilePath}.jpeg -resize "128x>" #{ThumbnailOutputFilePath}.jpeg</parameterString>
            <winParameterString>-define registry:temporary-path=#{nuxeo.tmp.dir} -quiet -background white -flatten #{inputFilePath}[0] -resize "1920x>" -write #{FullHDOutputFilePath}.jpeg -resize "1280x>" -write #{MediumOutputFilePath}.jpeg -resize "640x>" -write #{SmallOutputFilePath}.jpeg -resize "128x>" #{ThumbnailOutputFilePath}.jpeg</winParameterString>
            <testParameterString>-version</testParameterString>
            <installationDirective>You need to install ImageMagick.</installationDirective>
        </command>
    </extension>
</component>